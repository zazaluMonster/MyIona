(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userCard"],{"0132":function(e,t,s){"use strict";var o=s("3296"),a=s.n(o);a.a},"1ae8":function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.showPostBar?s("div",{staticStyle:{"margin-bottom":"10px"}},[s("Button",{staticClass:"postButton",attrs:{type:"primary"},on:{click:e.handlePost}},[e._v("发文")]),s("Button",{staticClass:"postButton",attrs:{type:"primary"},on:{click:e.handleReload}},[e._v("刷新")])],1):e._e(),e._l(e.messageItems,function(t){return s("Card",{key:t.id,staticClass:"iMessageCard",staticStyle:{width:"100%"}},[s("div",{on:{click:function(s){return e.jumpToMessageDetail(t.retweetorId>0?t.retweetMessageId:t.id)}}},[s("Row",[t.retweetorId>0?s("p",{staticStyle:{color:"rgb(155, 160, 165)"}},[s("Icon",{attrs:{type:"ios-repeat"}}),e._v("\n          "+e._s(t.retweetorName)+"转推了\n        ")],1):e._e(),s("i-col",{attrs:{span:"2"}},[s("img",{staticClass:"iMessageAvatar",attrs:{src:t.avatarUrl},on:{click:function(s){return s.stopPropagation(),e.jumpToUserCard(t.creator)}}})]),s("i-col",{staticStyle:{"margin-left":"10px"},attrs:{span:"21"}},[s("p",{staticClass:"crewName-little"},[s("span",{staticClass:"creatorNameSpan",on:{click:function(s){return s.stopPropagation(),e.jumpToUserCard(t.creator)}}},[e._v(e._s(t.creatorName))]),e._v("\n            ·\n            "),s("span",{staticStyle:{color:"rgb(101, 119, 134)","font-size":"15px"}},[e._v(e._s(t.createTime.substring(0,4))+"."+e._s(t.createTime.substring(4,6))+"."+e._s(t.createTime.substring(6,8))+" "+e._s(t.createTime.substring(8,10))+":"+e._s(t.createTime.substring(10,12)))]),s("span",{staticStyle:{float:"right"}},[s("Icon",{attrs:{size:18,type:"md-arrow-dropdown"}})],1)]),s("p",{staticClass:"iMessage",domProps:{innerHTML:e._s(t.html)}}),s("div",{staticClass:"toolGroup"},[s("Icon",{staticClass:"toolIcon",attrs:{type:"ios-chatbubbles-outline"}}),s("span",{staticClass:"toolSpan"},[e._v(e._s(t.commentNums))]),s("Icon",{staticClass:"toolIcon",attrs:{type:t.retweetIconType},on:{click:function(s){s.stopPropagation(),e.lock&&e.doRetweetSwitch(t)}}}),s("span",{staticClass:"toolSpan"},[e._v(e._s(t.retweetNums))]),s("Icon",{staticClass:"toolIcon",attrs:{type:t.iconType},on:{click:function(s){s.stopPropagation(),e.lock&&e.doLikeSwitch(t)}}}),s("span",{staticClass:"toolSpan"},[e._v(e._s(t.likeNums))])],1)])],1)],1)])}),s("new-message",{ref:"newMessage",on:{"on-success-valid":e.handleNewMessage}})],2)},a=[],n=s("6144"),i=n["a"],r=(s("6427"),s("2877")),c=Object(r["a"])(i,o,a,!1,null,"9ac650f0",null);t["a"]=c.exports},3296:function(e,t,s){},"3b58":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Content",{staticClass:"IonaContent"},[s("Row",[s("i-col",{attrs:{span:"6"}},[s("div",{staticStyle:{width:"fit-content"}},[s("div",{staticClass:"avatarCover"},[s("img",{attrs:{src:e.avatarSrc}})]),s("div",[s("div",[s("p",{staticClass:"crewName"},[e._v(e._s(e.userData.crewName))]),s("p",{staticClass:"crewOther"},[s("Icon",{attrs:{type:"ios-mail-outline"}}),s("a",[e._v(e._s(e.userData.mail))])],1),s("p",{staticClass:"crewOther"},[s("Icon",{attrs:{type:"ios-phone-portrait"}}),e._v("\n              "+e._s(e.userData.phoneNum)+"\n            ")],1)])]),s("div",[e.showFollow?e._e():s("Button",{staticClass:"followButton",attrs:{icon:"ios-heart-outline",type:"info",ghost:"",disabled:e.buttonController},on:{click:e.handleFollowStatus}},[e._v("关注")]),e.showFollow?s("Button",{staticClass:"followButton",attrs:{icon:"ios-heart-outline",type:"info",disabled:e.buttonController},on:{click:e.handleFollowStatus}},[e._v("取消关注")]):e._e()],1)])]),s("i-col",{attrs:{span:"18"}},[s("message-list",{attrs:{showPostBar:!1,messageItems:e.userMessageItems}})],1)],1),e.loading?s("Spin",{staticStyle:{"z-index":"1000"},attrs:{fix:""}}):e._e()],1)},a=[],n=s("667b"),i=n["a"],r=(s("0132"),s("2877")),c=Object(r["a"])(i,o,a,!1,null,"5010e292",null);t["default"]=c.exports},"5be4":function(e,t,s){},6144:function(e,t,s){"use strict";(function(e){s("c5f6");var o=s("d1a6"),a=s("5928");t["a"]={components:{NewMessage:o["a"]},props:{messageItems:{type:Array},showPostBar:{type:Boolean,default:function(){return!0}}},data:function(){return{iconNoLike:"ios-heart-outline",iconLike:"ios-heart",iconNoRetweet:"ios-repeat",iconRetweet:"md-repeat",lock:!0,bottomHight:50}},computed:{avatarSrc:function(){return this.$store.state.avatarUrl}},created:function(){},methods:{handlePost:function(){this.openNewMessagePannel()},handleReload:function(){this.$emit("on-reload-request")},openNewMessagePannel:function(){this.$refs.newMessage.show=!0},closeNewMessagePannel:function(){this.$refs.newMessage.show=!1},handleNewMessage:function(t){Object(a["c"])(e.$prop.URL.newMessage,t,this.newMessageResponse)},newMessageResponse:function(t){e.$util.successNotice("发文成功"),this.closeNewMessagePannel(),this.$emit("new-message-success")},jumpToUserCard:function(t){e.$util.routerPushRestful({name:"userCard",params:{userId:t}})},doLikeSwitch:function(t){var s=this;s.lock=!1,t.iconType==this.iconNoLike?Object(a["c"])(e.$prop.URL.doLike,{likerId:s.$store.state.userData.id,messageId:t.retweetorId>0?t.retweetMessageId:t.id,messageCreator:t.creator,curItem:t},this.doLikeResponse):t.iconType==this.iconLike&&Object(a["c"])(e.$prop.URL.cancelLike,{likerId:s.$store.state.userData.id,messageId:t.retweetorId>0?t.retweetMessageId:t.id,messageCreator:t.creator,curItem:t},this.cancelLikeResponse)},doLikeResponse:function(e,t){t.curItem.iconType=this.iconLike,t.curItem.likeNums=String(Number(t.curItem.likeNums)+1),this.lock=!0,this.handleReload()},cancelLikeResponse:function(e,t){t.curItem.iconType=this.iconNoLike,t.curItem.likeNums=String(Number(t.curItem.likeNums)-1),"0"==t.curItem.likeNums&&(t.curItem.likeNums=""),this.lock=!0,this.handleReload()},doRetweetSwitch:function(t){var s=this;s.lock=!1,t.retweetIconType==this.iconNoRetweet?Object(a["c"])(e.$prop.URL.newReTweetMessage,{id:t.retweetorId>0?t.retweetMessageId:t.id,html:t.html,createTime:t.createTime,creator:t.creator,curUserId:s.$store.state.userData.id,curItem:t},this.newReTweetMessageResponse):t.retweetIconType==this.iconRetweet&&Object(a["c"])(e.$prop.URL.cancelReTweetMessage,{curUserId:s.$store.state.userData.id,retweetMessageId:0==t.retweetMessageId?t.id:t.retweetMessageId,curItem:t},this.cancelReTweetMessageResponse)},newReTweetMessageResponse:function(e,t){t.curItem.retweetIconType=this.iconRetweet,t.curItem.retweetNums=String(Number(t.curItem.retweetNums)+1),this.lock=!0,this.handleReload()},cancelReTweetMessageResponse:function(e,t){t.curItem.retweetIconType=this.iconNoRetweet,t.curItem.retweetNums=String(Number(t.curItem.retweetNums)-1),"0"==t.curItem.retweetNums&&(t.curItem.retweetNums=""),this.lock=!0,this.handleReload()},jumpToMessageDetail:function(t){e.$util.routerPushRestful({name:"messageDetail",params:{messageId:t}})},handleReachBottom:function(){var e=this;return new Promise(function(t){setTimeout(function(){for(var s=e.list1[e.list1.length-1],o=1;o<11;o++)e.list1.push(s+o);t()},2e3)})}}}}).call(this,s("c8ba"))},6427:function(e,t,s){"use strict";var o=s("ca9e"),a=s.n(o);a.a},6583:function(e,t){const s=async e=>new Promise(t=>setTimeout(()=>t(e),e)),o=async e=>s(1e3*e),a=async e=>o(60*e),n=async e=>a(60*e),i=async e=>n(24*e);t=e.exports=s,t.sleep=s,t.sleepMilliseconds=s,t.sleepSeconds=o,t.sleepMinutes=a,t.sleepHours=n,t.sleepDays=i},"667b":function(e,t,s){"use strict";(function(e){var o=s("5928"),a=(s("6583"),s("1ae8"));t["a"]={components:{MessageList:a["a"]},data:function(){return{loading:!0,userMessageItems:[],userData:{},avatarSrc:"",showFollow:!1,loginUserData:{},buttonController:!1}},created:function(){this.initUserData(this.$route.params.userId),this.initUserIMessage(this.$route.params.userId),this.initFollowStatus(this.$route.params.userId)},methods:{initUserData:function(t){Object(o["c"])(e.$prop.URL.getCrew,{id:t},this.initUserDataResponse)},initUserDataResponse:function(t){this.userData=t.crew,this.avatarSrc=e.$util.getAvatarUrl(this.userData.avatarUrl)},initUserIMessage:function(t){t==this.$store.state.userData.id?e.$util.routerPush("我的伊文"):Object(o["c"])(e.$prop.URL.getUserMessage,{creator:t,curUserId:this.$store.state.userData.id},this.initMyIMessageResponse)},initMyIMessageResponse:function(e){this.userMessageItems=e.messages,this.loading=!1},initFollowStatus:function(t){this.loginUserData=this.$store.state.userData;var s=this.loginUserData.id;Object(o["c"])(e.$prop.URL.isFollowing,{followerId:s,followingId:t},this.initFollowStatusResponse)},initFollowStatusResponse:function(e){null==e.follow?this.showFollow=!1:this.showFollow=!0},handleFollowStatus:function(){this.showFollow?this.cancelFollow():this.addFollow()},cancelFollow:function(){this.showFollow=!1,this.controlFollowButtonClick(!0);var t=this.loginUserData.id,s=this.$route.params.userId;Object(o["c"])(e.$prop.URL.cancelFollow,{followerId:t,followingId:s},this.cancelFollowResponse)},cancelFollowResponse:function(){this.controlFollowButtonClick(!1),e.$util.logger("取消关注成功")},addFollow:function(){this.showFollow=!0,this.controlFollowButtonClick(!0);var t=this.loginUserData.id,s=this.$route.params.userId;Object(o["c"])(e.$prop.URL.addFollow,{followerId:t,followingId:s},this.addFollowResponse)},addFollowResponse:function(){this.controlFollowButtonClick(!1),e.$util.logger("添加关注成功")},controlFollowButtonClick:function(e){this.buttonController=e}}}}).call(this,s("c8ba"))},"9e4f":function(e,t,s){"use strict";var o=s("5be4"),a=s.n(o);a.a},ca9e:function(e,t,s){},d1a6:function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Drawer",{attrs:{title:"发送推文",width:"60%",placement:"left",closable:!1},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("rich-text",{attrs:{showPostButton:!0},on:{"on-success-valid":e.handleNewMessage}})],1)],1)},a=[],n=s("c622"),i={components:{RichText:n["a"]},data:function(){return{show:!1}},methods:{handleNewMessage:function(e){this.$emit("on-success-valid",e)}}},r=i,c=(s("9e4f"),s("2877")),l=Object(c["a"])(r,o,a,!1,null,"7ada9a6a",null);t["a"]=l.exports}}]);
//# sourceMappingURL=userCard.17f871e4.js.map