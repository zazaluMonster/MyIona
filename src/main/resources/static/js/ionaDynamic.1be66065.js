(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ionaDynamic"],{1487:function(e,t,s){"use strict";s.d(t,"a",function(){return n});var a=s("2b0e"),n=new a["default"]},"1ae8":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.showPostBar?s("div",{staticStyle:{"margin-bottom":"10px"}},[s("Button",{staticClass:"postButton",attrs:{type:"primary"},on:{click:e.handlePost}},[e._v("发文")]),s("Button",{staticClass:"postButton",attrs:{type:"primary"},on:{click:e.handleReload}},[e._v("刷新")])],1):e._e(),e._l(e.messageItems,function(t){return s("Card",{key:t.id,staticClass:"iMessageCard",staticStyle:{width:"100%"}},[s("div",{on:{click:function(s){return e.jumpToMessageDetail(t.retweetorId>0?t.retweetMessageId:t.id)}}},[s("Row",[t.retweetorId>0?s("p",{staticStyle:{color:"rgb(155, 160, 165)"}},[s("Icon",{attrs:{type:"ios-repeat"}}),e._v("\n          "+e._s(t.retweetorName)+"转推了\n        ")],1):e._e(),s("i-col",{attrs:{span:"2"}},[s("img",{staticClass:"iMessageAvatar",attrs:{src:t.avatarUrl},on:{click:function(s){return s.stopPropagation(),e.jumpToUserCard(t.creator)}}})]),s("i-col",{staticStyle:{"margin-left":"10px"},attrs:{span:"21"}},[s("p",{staticClass:"crewName-little"},[s("span",{staticClass:"creatorNameSpan",on:{click:function(s){return s.stopPropagation(),e.jumpToUserCard(t.creator)}}},[e._v(e._s(t.creatorName))]),e._v("\n            ·\n            "),s("span",{staticStyle:{color:"rgb(101, 119, 134)","font-size":"15px"}},[e._v(e._s(t.createTime.substring(0,4))+"."+e._s(t.createTime.substring(4,6))+"."+e._s(t.createTime.substring(6,8))+" "+e._s(t.createTime.substring(8,10))+":"+e._s(t.createTime.substring(10,12)))]),s("span",{staticStyle:{float:"right"}},[s("Icon",{attrs:{size:18,type:"md-arrow-dropdown"}})],1)]),s("p",{staticClass:"iMessage",domProps:{innerHTML:e._s(t.html)}}),s("div",{staticClass:"toolGroup"},[s("Icon",{staticClass:"toolIcon",attrs:{type:"ios-chatbubbles-outline"}}),s("span",{staticClass:"toolSpan"},[e._v(e._s(t.commentNums))]),s("Icon",{staticClass:"toolIcon",attrs:{type:t.retweetIconType},on:{click:function(s){s.stopPropagation(),e.lock&&e.doRetweetSwitch(t)}}}),s("span",{staticClass:"toolSpan"},[e._v(e._s(t.retweetNums))]),s("Icon",{staticClass:"toolIcon",attrs:{type:t.iconType},on:{click:function(s){s.stopPropagation(),e.lock&&e.doLikeSwitch(t)}}}),s("span",{staticClass:"toolSpan"},[e._v(e._s(t.likeNums))])],1)])],1)],1)])}),s("new-message",{ref:"newMessage",on:{"on-success-valid":e.handleNewMessage}})],2)},n=[],o=s("6144"),i=o["a"],r=(s("6427"),s("2877")),c=Object(r["a"])(i,a,n,!1,null,"9ac650f0",null);t["a"]=c.exports},4212:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Card",{staticStyle:{width:"400px"}},[s("p",{attrs:{slot:"title"},slot:"title"},[e._v("推荐用户")]),s("ul",[e._l(e.dataItems,function(t){return s("li",{key:t.id},[s("Row",[s("i-col",{attrs:{span:"2"}},[s("img",{staticClass:"avatar",attrs:{src:e.getAvatarUrl(t.avatarUrl)}})]),s("i-col",{staticStyle:{"margin-left":"10px"},attrs:{span:"21"}},[s("Row",[s("i-col",{attrs:{span:"17"}},[s("p",{staticClass:"crewName"},[s("strong",[e._v(e._s(t.crewName))])])]),s("i-col",{attrs:{span:"7"}},[0==t.isFollow?s("Button",{staticClass:"followButton",attrs:{icon:"ios-heart-outline",type:"info",disabled:e.buttonController,ghost:""},on:{click:function(s){return e.handleFollowStatus(t)}}},[e._v("关注")]):e._e(),t.isFollow>0?s("Button",{staticClass:"followButton",attrs:{icon:"ios-heart-outline",type:"info",disabled:e.buttonController},on:{click:function(s){return e.handleFollowStatus(t)}}},[e._v("取消关注")]):e._e()],1)],1),s("Row",[s("p",{staticClass:"user-introduce"},[e._v(e._s(t.crewMessage))])])],1)],1)],1)}),s("div",[s("a",{on:{click:e.changeData}},[e._v("换一批")])])],2)])},n=[],o=s("c21b"),i=o["a"],r=(s("42be"),s("2877")),c=Object(r["a"])(i,a,n,!1,null,"d383965c",null);t["a"]=c.exports},"42be":function(e,t,s){"use strict";var a=s("4519"),n=s.n(a);n.a},4519:function(e,t,s){},"5be4":function(e,t,s){},6144:function(e,t,s){"use strict";(function(e){s("c5f6");var a=s("d1a6"),n=s("5928");t["a"]={components:{NewMessage:a["a"]},props:{messageItems:{type:Array},showPostBar:{type:Boolean,default:function(){return!0}}},data:function(){return{iconNoLike:"ios-heart-outline",iconLike:"ios-heart",iconNoRetweet:"ios-repeat",iconRetweet:"md-repeat",lock:!0,bottomHight:50}},computed:{avatarSrc:function(){return this.$store.state.avatarUrl}},created:function(){},methods:{handlePost:function(){this.openNewMessagePannel()},handleReload:function(){this.$emit("on-reload-request")},openNewMessagePannel:function(){this.$refs.newMessage.show=!0},closeNewMessagePannel:function(){this.$refs.newMessage.show=!1},handleNewMessage:function(t){Object(n["c"])(e.$prop.URL.newMessage,t,this.newMessageResponse)},newMessageResponse:function(t){e.$util.successNotice("发文成功"),this.closeNewMessagePannel(),this.$emit("new-message-success")},jumpToUserCard:function(t){e.$util.routerPushRestful({name:"userCard",params:{userId:t}})},doLikeSwitch:function(t){var s=this;s.lock=!1,t.iconType==this.iconNoLike?Object(n["c"])(e.$prop.URL.doLike,{likerId:s.$store.state.userData.id,messageId:t.retweetorId>0?t.retweetMessageId:t.id,messageCreator:t.creator,curItem:t},this.doLikeResponse):t.iconType==this.iconLike&&Object(n["c"])(e.$prop.URL.cancelLike,{likerId:s.$store.state.userData.id,messageId:t.retweetorId>0?t.retweetMessageId:t.id,messageCreator:t.creator,curItem:t},this.cancelLikeResponse)},doLikeResponse:function(e,t){t.curItem.iconType=this.iconLike,t.curItem.likeNums=String(Number(t.curItem.likeNums)+1),this.lock=!0,this.handleReload()},cancelLikeResponse:function(e,t){t.curItem.iconType=this.iconNoLike,t.curItem.likeNums=String(Number(t.curItem.likeNums)-1),"0"==t.curItem.likeNums&&(t.curItem.likeNums=""),this.lock=!0,this.handleReload()},doRetweetSwitch:function(t){var s=this;s.lock=!1,t.retweetIconType==this.iconNoRetweet?Object(n["c"])(e.$prop.URL.newReTweetMessage,{id:t.retweetorId>0?t.retweetMessageId:t.id,html:t.html,createTime:t.createTime,creator:t.creator,curUserId:s.$store.state.userData.id,curItem:t},this.newReTweetMessageResponse):t.retweetIconType==this.iconRetweet&&Object(n["c"])(e.$prop.URL.cancelReTweetMessage,{curUserId:s.$store.state.userData.id,retweetMessageId:0==t.retweetMessageId?t.id:t.retweetMessageId,curItem:t},this.cancelReTweetMessageResponse)},newReTweetMessageResponse:function(e,t){t.curItem.retweetIconType=this.iconRetweet,t.curItem.retweetNums=String(Number(t.curItem.retweetNums)+1),this.lock=!0,this.handleReload()},cancelReTweetMessageResponse:function(e,t){t.curItem.retweetIconType=this.iconNoRetweet,t.curItem.retweetNums=String(Number(t.curItem.retweetNums)-1),"0"==t.curItem.retweetNums&&(t.curItem.retweetNums=""),this.lock=!0,this.handleReload()},jumpToMessageDetail:function(t){e.$util.routerPushRestful({name:"messageDetail",params:{messageId:t}})},handleReachBottom:function(){var e=this;return new Promise(function(t){setTimeout(function(){for(var s=e.list1[e.list1.length-1],a=1;a<11;a++)e.list1.push(s+a);t()},2e3)})}}}}).call(this,s("c8ba"))},6427:function(e,t,s){"use strict";var a=s("ca9e"),n=s.n(a);n.a},"9e4f":function(e,t,s){"use strict";var a=s("5be4"),n=s.n(a);n.a},c21b:function(e,t,s){"use strict";(function(e){s("c5f6");var a=s("5928");t["a"]={components:{},props:{associatedUserId:{type:Number,default:function(){return this.$store.state.userData.id}}},data:function(){return{pagerIndex:1,pagerSize:3,dataItems:null,buttonController:!1}},created:function(){this.initData()},methods:{initData:function(){Object(a["c"])(e.$prop.URL.getRecommendUser,{associatedUserId:this.associatedUserId,curUserId:this.$store.state.userData.id,pagerIndex:this.pagerIndex,pagerSize:this.pagerSize},this.initDataResponse)},initDataResponse:function(e){this.dataItems=e.crewList,0==this.dataItems.length&&1!=this.pagerIndex?(this.pagerIndex=1,this.initData()):this.pagerIndex+=1},changeData:function(){this.initData()},getAvatarUrl:function(t){var s,a=String(t);return s=0==a.trim().length?this.$store.state.defaultAvatarUrl:e.$util.getAvatarUrl(a),s},handleFollowStatus:function(e){0==e.isFollow?this.addFollow(e):this.cancelFollow(e)},cancelFollow:function(t){t.isFollow=0,this.buttonController=!0,Object(a["c"])(e.$prop.URL.cancelFollow,{followerId:this.$store.state.userData.id,followingId:t.id},this.cancelFollowResponse)},cancelFollowResponse:function(){this.buttonController=!1},addFollow:function(t){t.isFollow=1,this.buttonController=!0,Object(a["c"])(e.$prop.URL.addFollow,{followerId:this.$store.state.userData.id,followingId:t.id},this.addFollowResponse)},addFollowResponse:function(){this.buttonController=!1}}}}).call(this,s("c8ba"))},ca9e:function(e,t,s){},d1a6:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Drawer",{attrs:{title:"发送推文",width:"60%",placement:"left",closable:!1},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("rich-text",{attrs:{showPostButton:!0},on:{"on-success-valid":e.handleNewMessage}})],1)],1)},n=[],o=s("c622"),i={components:{RichText:o["a"]},data:function(){return{show:!1}},methods:{handleNewMessage:function(e){this.$emit("on-success-valid",e)}}},r=i,c=(s("9e4f"),s("2877")),l=Object(c["a"])(r,a,n,!1,null,"7ada9a6a",null);t["a"]=l.exports},d7f6:function(e,t,s){"use strict";(function(e){var a=s("1ae8"),n=s("4212"),o=s("5928"),i=s("1487");t["a"]={components:{MessageList:a["a"],RecommendUser:n["a"]},data:function(){return{loading:!1,switchs:!1,friendMessageItems:[],pager:{index:1,size:10}}},created:function(){var e=this;this.initFriendIMessage(),i["a"].$on("on-scroll-buttom",function(){e.handleScrollButtom()})},methods:{handleScrollButtom:function(){this.pager.index+=1;var t=this;Object(o["c"])(e.$prop.URL.getFriendMessage,{message:{id:this.$store.state.userData.id},pager:t.pager},this.handleScrollButtomResponse)},handleScrollButtomResponse:function(t){t.messages.length>0?(this.friendMessageItems=this.friendMessageItems.concat(t.messages),i["a"].$emit("on-scroll-buttom-success")):e.$util.logger("已无更多数据")},initFriendIMessage:function(){this.pager.index=1;var t=this;Object(o["c"])(e.$prop.URL.getFriendMessage,{message:{id:this.$store.state.userData.id},pager:t.pager},this.initFriendIMessageResponse)},initFriendIMessageResponse:function(e){this.friendMessageItems=e.messages,this.loading=!1},handleReload:function(){this.initFriendIMessage()}}}}).call(this,s("c8ba"))},e6b6:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Content",{staticClass:"IonaContent"},[s("Row",[s("i-col",{attrs:{span:"15"}},[e.loading?e._e():s("message-list",{attrs:{showPostBar:!0,messageItems:e.friendMessageItems},on:{"new-message-success":e.handleReload,"on-reload-request":e.handleReload}})],1),s("i-col",{staticStyle:{"margin-left":"20px"},attrs:{span:"8"}},[s("recommend-user")],1)],1),e.loading?s("Spin",{attrs:{fix:""}}):e._e()],1)},n=[],o=s("d7f6"),i=o["a"],r=s("2877"),c=Object(r["a"])(i,a,n,!1,null,"7bc1aab9",null);t["default"]=c.exports}}]);
//# sourceMappingURL=ionaDynamic.1be66065.js.map